<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title></title>
<link rel="stylesheet" href="http://code.jquery.com/mobile/1.3.2/jquery.mobile-1.3.2.min.css" />
<script src="http://code.jquery.com/jquery-1.9.1.min.js"></script>
<script src="http://code.jquery.com/mobile/1.3.2/jquery.mobile-1.3.2.min.js"></script>
<script src="https://www.google.com/jsapi"></script>
<script>
google.load('visualization', '1.0', {'packages':['corechart']});

$(document).on('pagecreate','#index',function(){
    
    var innerAry = [];
    innerAry.push(['地域', '件数']);
     
    $.getJSON("ramen.json",
        function(data){
            $.each(data['ラーメン']['地域'], function(key,val){
                    var i = 0;
                    $.each(val,function(key,val){
                        i++;
                    });
                     
                    var buff = new Array();
                    buff.push(key);
                    buff.push(i);
                    innerAry.push(buff);
            });
    });
     
    google.setOnLoadCallback(drawChart);
     
    function drawChart(){
         
        var outerAry = new Array();
        for(var i = 0; i < innerAry.length; i++){
            outerAry.push(innerAry[i]);
        }
         
        var data = google.visualization.arrayToDataTable(outerAry);
         
        var options = {
            title:'ラーメン屋件数',
            vAxis:{title:'地域',titleTextStyle:{color:'#0000FF'}},
            chartArea:{height:"70%"}
        };
        var chart = new google.visualization.BarChart(document.getElementById('chart'));
        chart.draw(data, options);
    }
});
</script>
<style>
#chart{
    width:100%;
    height:480px;
}
</style>
</head>
<body>
<div data-role="page" id="index">
    <div data-role="header">
        <h1>ラーメン屋件数</h1>
    </div>
    <div data-role="content">
         <div id="chart"></div>
    </div>
    <div data-role="footer" data-position="fixed">
        <h4>Copyright &copy; ナカノヨウスケ</h4>
    </div>
</div>
</body>
