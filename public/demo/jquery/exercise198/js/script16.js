// Generated by CoffeeScript 1.7.1
(function() {
  $(function() {
    $('form').submit(function() {
      $('p.error').remove();
      $('dl dd').removeClass('error');
      $(':text,textarea').filter('.validate').each(function() {
        console.log('テキストボックス、テキストエリア');
        $(this).filter('.required').each(function() {
          console.log('必須');
          if ($(this).val() === '') {
            $(this).parent().prepend('<p class="error">必須項目です</p>');
          }
        });
        $(this).filter('.number').each(function() {
          console.log('数値');
          if (isNaN($(this).val())) {
            $(this).parent().prepend('<p class="error">数値のみ入力可能です</p>');
          }
        });
        $(this).filter('.mail').each(function() {
          console.log('メールアドレス');
          if ($(this).val() && !$(this).val().match(/.+@.+\..+/g)) {
            $(this).parent().prepend('<p class="error">メールアドレスの形式が異なります</p>');
          }
        });
        $(this).filter('.mail_check').each(function() {
          console.log('メールアドレス確認');
          if ($(this).val() && $(this).val() !== $('input[name="' + $(this).attr('name').replace(/^(.+)_check$/, '$1') + '"]').val()) {
            $(this).parent().prepend('<p class="error">メールアドレスと内容が異なります</p>');
          }
        });
      });
      $(':radio').filter('.validate').each(function() {
        console.log('ラジオボタン');
        $(this).filter('.required').each(function() {
          if ($(':radio[name="' + $(this).attr('name') + '"]:checked').size() === 0) {
            $(this).parent().prepend('<p class="error">選択してください</p>');
          }
        });
      });
      $('.checkboxRequired').each(function() {
        console.log('チェックボックス');
        if ($(':checkbox:checked', this).size() === 0) {
          $(this).prepend('<p class="error">選択してください</p>');
        }
      });
      $('.validate.add_text').each(function() {
        console.log('その他の項目');
        if ($(this).prop('checked') === true && $('input[name="' + $(this).attr('name').replace(/^(.+)$/, '$1_text') + '"]').val() === '') {
          $(this).parent().prepend('<p class="error">その他の項目を入力してください。</p>');
        }
      });
      if ($('p.error').size() > 0) {
        $('p.error').parent().addClass('error');
        return false;
      }
    });
  });

}).call(this);
