<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, user-scalable=no">
<meta name="apple-mobile-web-app-capable" content="yes" /> 
<script src='enchant.min.js'></script>
<script>
enchant();

var SCREEN_WIDTH = 320;
var SCREEN_HEIGHT = 320;
var MAP_IMAGE = 'http://enchantjs.com/assets/images/map0.gif';
var MAP_DATA = [
  [ 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6],
  [ 6,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1, 6],
  [ 6,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1, 6],
  [ 6,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1, 6, 6,-1,-1, 6],
  [ 6,-1,-1,-1,-1,-1,-1, 6, 6,-1,-1,-1,-1,-1,-1, 6, 6,-1,-1, 6],
  [ 6,-1, 6, 6,-1,-1,-1, 6, 6,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1, 6],
  [ 6,-1, 6, 6,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1, 6],
  [ 6,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1, 6],
  [ 6,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1, 6, 6,-1,-1,-1,-1,-1,-1, 6],
  [ 6,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1, 6, 6,-1,-1,-1,-1,-1,-1, 6],
  [ 6,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1, 6],
  [ 6,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1, 6],
  [ 6,-1,-1,-1, 6, 6,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1, 6],
  [ 6,-1,-1,-1, 6, 6,-1,-1,-1,-1,-1,-1,-1,-1,-1, 6, 6,-1,-1, 6],
  [ 6,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1, 6, 6,-1,-1, 6],
  [ 6,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1, 6],
  [ 6,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1, 6, 6,-1,-1,-1,-1,-1,-1, 6],
  [ 6,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1, 6, 6,-1,-1,-1,-1,-1,-1, 6],
  [ 6,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1, 6],
  [ 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6]
];

window.onload = function() {
    var core = new Core(SCREEN_WIDTH, SCREEN_HEIGHT);

    core.preload(MAP_IMAGE);

    core.onload = function() {
   		var scene = core.rootScene;

      scene.backgroundColor = 'black';

      var map = new Map(16, 16);

      map.image = core.assets[MAP_IMAGE];

      map.loadData(MAP_IMAGE);

      map.loadData(MAP_DATA);

      scene.addChild(map);

      scene.ontouchstart = function(e){
        if(map.hitTest(e.x, e.y) === true ){
          alert('hit!!');
        }
      };

    };
    core.start();
};
</script>
<style type="text/css">
body {
    margin: 0;
}
</style>
</head>
<body>
</body>
</html>
